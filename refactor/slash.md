Agent 开发工作流 Slash 指令集规范 (RTL 专用版)

这套指令旨在消除 RTL 设计与验证过程中的逻辑歧义，强制 Agent 进入硬件设计思维模式，严禁产出无关的软件 UI 逻辑。

1. /plan - 架构与逻辑规划

适用场景： 模块设计启动、协议解析或复杂算法的硬件化方案。

输入要求： 功能规格书 (Spec)、时钟域要求、核心算法或接口协议（如 AXI, SPI）。

Agent 行为： 禁止写代码。必须输出：

设计理解确认（简述输入输出逻辑）。

模块层级分解（划分 Sub-module 与 Top-level）。

关键时序/状态机图解（描述 FSM 转移逻辑或流水线深度）。

端口列表定义（Signal name, Width, Direction）。

预期目标： 形成一份硬件架构方案，作为后续 RTL 编码的基准。

2. /unit - 模块实现

适用场景： 编写具体的 Verilog/SystemVerilog 模块。

输入要求： 指定 /plan 中的某个子模块或特定的逻辑功能描述。

Agent 行为：

实现 RTL 逻辑代码（注重可综合性）。

强制编写配套 Testbench（简单的单元仿真环境）。

单点突破，只关注当前模块的逻辑实现，严禁在此时处理跨模块信号连接。

预期目标： 得到一个逻辑正确、可通过编译且附带基本验证环境的 .v 或 .sv 文件。

3. /fix-unit - 逻辑调试 (Debug)

适用场景： 仿真失败 (Sim Error)、逻辑冲突或语法报错。

输入要求： 仿真日志、波形异常描述（如 X 态传播）、当前模块代码。

Agent 行为：

波形因果分析：推导是复位逻辑问题、组合逻辑环路还是时序违例。

最小化修复：仅修正导致错误的 RTL 逻辑，严禁为了修 Bug 改变已经定义的端口协议。

回归验证建议：指出修复后是否需要重新检查关联的 FSM 状态。

预期目标： 模块通过语法检查与功能仿真。

4. /assemble - 顶层集成

适用场景： 完成各子模块后，进行 Top-level 封装与连线。

输入要求： 已完成的所有子模块代码、顶层时钟/复位方案。

Agent 行为：

编写 Top 层的例化代码 (Instantiation) 与信号连线 (Wire bonding)。

处理全局信号（如 Clock Gating, Global Reset）。

检查信号位宽匹配与未连接引脚 (Floating pins)。

预期目标： 一个完整的、可供进行系统级仿真或综合的硬件设计包。

5. /audit - 质量审查与优化

适用场景： 针对综合后的时序、面积、功耗或 lint 检查结果进行优化。

输入要求： 综合报告、Lint 检查结果（如 SpyGlass）、CDC（跨时钟域）检查日志。

Agent 行为：

全景扫描：检查是否存在多驱动、非同步复位或跨时钟域亚稳态风险。

重构建议：针对时序瓶颈提出逻辑拆分或增加流水线 (Pipelining) 的方案。

冗余消除：优化面积，去除无用的逻辑寄存器。

预期目标： 提升 RTL 代码的健壮性、可综合性及 PPA（性能、功耗、面积）表现。

💡 使用建议（针对用户）

禁止跳级：在 RTL 开发中，没有明确的端口定义和时序逻辑 /plan 之前，直接写顶层 /assemble 会导致灾难性的连线错误。

验证先行：要求 Agent 在 /unit 阶段必须给出仿真激励，硬件代码不跑仿真等于废纸。

指令前置：在每次 Prompt 的开头明确使用 /指令名，让 Agent 切换到硬件工程师模式。